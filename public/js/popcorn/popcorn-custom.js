/*
 * popcorn.js version v1.5.11
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

!function(){if(!document.addEventListener&&!document.removeEventListener&&!document.dispatchEvent){var e={},t=function(t,n){return t="DOMContentLoaded"===t?"readystatechange":t,Event[t.toUpperCase()]||"readystatechange"===t?void document.attachEvent("on"+t,n):(e[t]||(e[t]={events:[],queue:[],active:!1}),void(e[t].active?e[t].queue.push(n):e[t].events.push(n)))},n=function(t,n){t="DOMContentLoaded"===t?"readystatechange":t;var r=0,i=e[t];if(Event[t.toUpperCase()]||"readystatechange"===t)return void document.detachEvent("on"+t,n);if(i){for(r=i.events.length-1;r>=0;r--)n===i.events[r]&&delete i.events[r];for(r=i.queue.length-1;r>=0;r--)n===i.queue[r]&&delete i.queue[r]}},r=function(t){var n,r,i,a,o=this,s=t.type;if(s||(s=t,r=Popcorn.events.getInterface(s),r&&(n=document.createEvent(r),n.initCustomEvent(s,!0,!0,window,1))),i=e[s]){i.active=!0;for(var u=0;u<i.events.length;u++)i.events[u]&&i.events[u].call(o,n,o);if(i.queue.length)for(;i.queue.length;)a=i.queue.shift(),a&&i.events.push(a);i.active=!1,i.events.forEach(function(e){e||i.events.splice(i.events.indexOf(e),1)}),i.queue.forEach(function(e){e||i.queue.splice(i.queue.indexOf(e),1)})}};document.addEventListener=t,document.removeEventListener=n,document.dispatchEvent=r}Event.prototype.preventDefault||(Event.prototype.preventDefault=function(){this.returnValue=!1}),Event.prototype.stopPropagation||(Event.prototype.stopPropagation=function(){this.cancelBubble=!0}),window.addEventListener=window.addEventListener||function(e,t){e="on"+e,window.attachEvent(e,t)},window.removeEventListener=window.removeEventListener||function(e,t){e="on"+e,window.detachEvent(e,t)},HTMLScriptElement.prototype.addEventListener=HTMLScriptElement.prototype.addEventListener||function(e,t){e="load"===e?"onreadystatechange":"on"+e,"onreadystatechange"===e&&(t.readyStateCheck=t.readyStateCheck||function(e){"loaded"===self.readyState&&t(e)}),this.attachEvent(e,t.readyStateCheck||t)},HTMLScriptElement.prototype.removeEventListener=HTMLScriptElement.prototype.removeEventListener||function(e,t){e="load"===e?"onreadystatechange":"on"+e,this.detachEvent(e,t.readyStateCheck||t)},document.createEvent=document.createEvent||function(e){return{type:null,target:null,currentTarget:null,cancelable:!1,detail:!1,bubbles:!1,initEvent:function(e,t,n){this.type=e},initCustomEvent:function(e,t,n,r){this.type=e,this.detail=r},stopPropagation:function(){},stopImmediatePropagation:function(){}}},Array.prototype.forEach=Array.prototype.forEach||function(e,t){var n=this,r=Object.prototype.hasOwnProperty;if(!n||!e)return{};t=t||this;var i;for(i in n)r.call(n,i)&&e.call(t,n[i],i,n);return n},Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(null==this)throw new TypeError("this is null or not defined");var a=Object(this),o=a.length>>>0;if("[object Function]"!={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(n=t),r=new Array(o),i=0;o>i;){var s,u;i in a&&(s=a[i],u=e.call(n,s,i,a),r[i]=u),i++}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var a,o,s=[];for(a in i)e.call(i,a)&&s.push(a);if(t)for(o=0;r>o;o++)e.call(i,n[o])&&s.push(n[o]);return s}}()),Object.defineProperties||(Object.defineProperties=function(e,t){function n(t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){return"function"==typeof e}if("object"!=typeof t||null===t)throw new TypeError("bad desc");var i={};if(n(t,"enumerable")&&(i.enumerable=!!e.enumerable),n(t,"configurable")&&(i.configurable=!!t.configurable),n(t,"value")&&(i.value=e.value),n(t,"writable")&&(i.writable=!!t.writable),n(t,"get")){var a=t.get;if(!r(a)&&"undefined"!==a)throw new TypeError("bad get");i.get=a}if(n(t,"set")){var o=t.set;if(!r(o)&&"undefined"!==o)throw new TypeError("bad set");i.set=o}if(("get"in i||"set"in i)&&("value"in i||"writable"in i))throw new TypeError("identity-confused descriptor");return i}if("object"!=typeof e||null===e)throw new TypeError("bad obj");t=Object(t);for(var r=Object.keys(t),i=[],a=0;a<r.length;a++)i.push([r[a],n(t[r[a]])]);for(var a=0;a<i.length;a++)Object.defineProperty(e,i[a][0],i[a][1]);return e})}(),function(e,t){function n(e){_.put.call(this,e)}function r(e){this.parent=e,this.byStart=[{start:-1,end:-1}],this.byEnd=[{start:-1,end:-1}],this.animating=[],this.startIndex=0,this.endIndex=0,this.previousUpdateTime=-1,this.count=1}function i(e,t,n){return e[t]&&e[t]===n}function a(e,t){var n={};for(var r in e)l.call(t,r)&&l.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){return function(){if(b.plugin.debug)return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(n){b.plugin.errors.push({plugin:t,thrown:n,source:e.toString()}),this.emit("pluginerror",b.plugin.errors)}}}if(t.addEventListener){var s=Array.prototype,u=Object.prototype,c=s.forEach,d=s.slice,l=u.hasOwnProperty,p=u.toString,f=e.Popcorn,h=[],v=!1,y=!1,m={events:{hash:{},apis:{}}},g=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t,n){e.setTimeout(t,16)}}(),E=function(e){return Object.keys?Object.keys(e):function(e){var t,n=[];for(t in e)l.call(e,t)&&n.push(t);return n}(e)},_={put:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}},b=function(e,t){return new b.p.init(e,t||null)};b.version="@VERSION",b.isSupported=!0,b.instances=[],b.p=b.prototype={init:function(e,n){var i,a,o=this;{if("function"!=typeof e){if("string"==typeof e)try{i=t.querySelector(e)}catch(s){throw new Error("Popcorn.js Error: Invalid media element selector: "+e)}if(this.media=i||e,a=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[a]=this.media,this.options=b.extend({},n)||{},this.id=this.options.id||b.guid(a),b.byId(this.id))throw new Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:b.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new r(this)},b.instances.push(this);var u=function(){o.media.currentTime<0&&(o.media.currentTime=0),o.media.removeEventListener("loadedmetadata",u,!1);var e,t,n,r,i,a;e=o.media.duration,t=e!=e?Number.MAX_VALUE:e+1,b.addTrackEvent(o,{start:t,end:t}),o.isDestroyed||(o.data.durationChange=function(){var e=o.media.duration,t=e+1,n=o.data.trackEvents.byStart,r=o.data.trackEvents.byEnd;n.pop(),r.pop();for(var i=r.length-1;i>0;i--)r[i].end>e&&o.removeTrackEvent(r[i]._id);for(var a=0;a<n.length;a++)n[a].end>e&&o.removeTrackEvent(n[a]._id);o.data.trackEvents.byEnd.push({start:t,end:t}),o.data.trackEvents.byStart.push({start:t,end:t})},o.media.addEventListener("durationchange",o.data.durationChange,!1)),o.options.frameAnimation?(o.data.timeUpdate=function(){b.timeUpdate(o,{}),b.forEach(b.manifest,function(e,t){if(n=o.data.running[t]){i=n.length;for(var s=0;i>s;s++)r=n[s],a=r._natives,a&&a.frame&&a.frame.call(o,{},r,o.currentTime())}}),o.emit("timeupdate"),!o.isDestroyed&&g(o.data.timeUpdate)},!o.isDestroyed&&g(o.data.timeUpdate)):(o.data.timeUpdate=function(e){b.timeUpdate(o,e)},o.isDestroyed||o.media.addEventListener("timeupdate",o.data.timeUpdate,!1))};return o.media.addEventListener("error",function(){o.error=o.media.error},!1),o.media.readyState>=1?u():o.media.addEventListener("loadedmetadata",u,!1),this}if("complete"===t.readyState)return void e(t,b);if(h.push(e),!v){v=!0;var c=function(){y=!0,t.removeEventListener("DOMContentLoaded",c,!1);for(var e=0,n=h.length;n>e;e++)h[e].call(t,b);h=null};t.addEventListener("DOMContentLoaded",c,!1)}}}},b.p.init.prototype=b.p,b.byId=function(e){for(var t=b.instances,n=t.length,r=0;n>r;r++)if(t[r].id===e)return t[r];return null},b.forEach=function(e,t,n){if(!e||!t)return{};n=n||this;var r,i;if(c&&e.forEach===c)return e.forEach(t,n);if("[object NodeList]"===p.call(e)){for(r=0,i=e.length;i>r;r++)t.call(n,e[r],r,e);return e}for(r in e)l.call(e,r)&&t.call(n,e[r],r,e);return e},b.extend=function(e){var t=e,n=d.call(arguments,1);return b.forEach(n,function(e){for(var n in e)t[n]=e[n]}),t},b.extend(b,{noConflict:function(t){return t&&(e.Popcorn=f),b},error:function(e){throw new Error(e)},guid:function(e){return b.guid.counter++,(e?e:"")+(+new Date+b.guid.counter)},sizeOf:function(e){var t=0;for(var n in e)t++;return t},isArray:Array.isArray||function(e){return"[object Array]"===p.call(e)},nop:function(){},position:function(n){if(!n.parentNode)return null;var r,i,a,o,s,u,c=n.getBoundingClientRect(),d={},l=(n.ownerDocument,t.documentElement),p=t.body;r=l.clientTop||p.clientTop||0,i=l.clientLeft||p.clientLeft||0,a=e.pageYOffset&&l.scrollTop||p.scrollTop,o=e.pageXOffset&&l.scrollLeft||p.scrollLeft,s=Math.ceil(c.top+a-r),u=Math.ceil(c.left+o-i);for(var f in c)d[f]=Math.round(c[f]);return b.extend({},d,{top:s,left:u})},disable:function(e,t){if(!e.data.disabled[t]){if(e.data.disabled[t]=!0,t in b.registryByName&&e.data.running[t])for(var n,r=e.data.running[t].length-1;r>=0;r--)n=e.data.running[t][r],n._natives.end.call(e,null,n),e.emit("trackend",b.extend({},n,{plugin:n.type,type:"trackend"}));return e}},enable:function(e,t){if(e.data.disabled[t]){if(e.data.disabled[t]=!1,t in b.registryByName&&e.data.running[t])for(var n,r=e.data.running[t].length-1;r>=0;r--)n=e.data.running[t][r],n._natives.start.call(e,null,n),e.emit("trackstart",b.extend({},n,{plugin:n.type,type:"trackstart",track:n}));return e}},destroy:function(e){var t,n,r,i,a=e.data.events,o=e.data.trackEvents;for(n in a){t=a[n];for(r in t)delete t[r];a[n]=null}for(i in b.registryByName)b.removePlugin(e,i);o.byStart.length=0,o.byEnd.length=0,e.isDestroyed||(e.data.timeUpdate&&e.media.removeEventListener("timeupdate",e.data.timeUpdate,!1),e.isDestroyed=!0),b.instances.splice(b.instances.indexOf(e),1)}}),b.guid.counter=1,b.extend(b.p,function(){var e="load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended",t={};return b.forEach(e.split(/\s+/g),function(e){t[e]=function(t){var n;return"function"==typeof this.media[e]?(null!=t&&/play|pause/.test(e)&&(this.media.currentTime=b.util.toSeconds(t)),this.media[e](),this):null!=t?(n=this.media[e],this.media[e]=t,n!==t&&this.emit("attrchange",{attribute:e,previousValue:n,currentValue:t}),this):this.media[e]}}),t}()),b.forEach("enable disable".split(" "),function(e){b.p[e]=function(t){return b[e](this,t)}}),b.extend(b.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(e,t,r){var i,a,o,s=arguments.length,u="trackadded";try{a=b.util.toSeconds(e)}catch(c){}if("number"==typeof a&&(e=a),"number"==typeof e&&2===s)r=t,t=e,e=b.guid("cue");else if(1===s)t=-1;else if(i=this.getTrackEvent(e))this.data.trackEvents.remove(e),n.end(this,i),b.removeTrackEvent.ref(this,e),u="cuechange","string"==typeof e&&2===s&&("number"==typeof t&&(r=i._natives.start),"function"==typeof t&&(r=t,t=i.start));else if(s>=2){if("string"==typeof t){try{a=b.util.toSeconds(t)}catch(c){}t=a}"number"==typeof t&&(r=r||b.nop()),"function"==typeof t&&(r=t,t=-1)}return o={id:e,start:t,end:t+1,_running:!1,_natives:{start:r||b.nop,end:b.nop,type:"cue"}},i&&(o=b.extend(i,o)),"cuechange"===u?(o._id=o.id||o._id||b.guid(o._natives.type),this.data.trackEvents.add(o),n.start(this,o),this.timeUpdate(this,null,!0),b.addTrackEvent.ref(this,o),this.emit(u,b.extend({},o,{id:e,type:u,previousValue:{time:i.start,fn:i._natives.start},currentValue:{time:t,fn:r||b.nop},track:i}))):b.addTrackEvent(this,o),this},mute:function(e){var t=null==e||e===!0?"muted":"unmuted";return"unmuted"===t&&(this.media.muted=!1,this.media.volume=this.data.state.volume),"muted"===t&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(t),this},unmute:function(e){return this.mute(null==e?!1:!e)},position:function(){return b.position(this.media)},toggle:function(e){return b[this.data.disabled[e]?"enable":"disable"](this,e)},defaults:function(e,t){return b.isArray(e)?(b.forEach(e,function(e){for(var t in e)this.defaults(t,e[t])},this),this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[e]||(this.options.defaults[e]={}),b.extend(this.options.defaults[e],t),this)}}),b.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"},b.Events.Natives=b.Events.UIEvents+" "+b.Events.MouseEvents+" "+b.Events.Events,m.events.apiTypes=["UIEvents","MouseEvents","Events"],function(e,t){for(var n=m.events.apiTypes,r=e.Natives.split(/\s+/g),i=0,a=r.length;a>i;i++)t.hash[r[i]]=!0;n.forEach(function(n,r){t.apis[n]={};for(var i=e[n].split(/\s+/g),a=i.length,o=0;a>o;o++)t.apis[n][i[o]]=!0})}(b.Events,m.events),b.events={isNative:function(e){return!!m.events.hash[e]},getInterface:function(e){if(!b.events.isNative(e))return!1;for(var t,n,r=m.events,i=r.apiTypes,a=r.apis,o=0,s=i.length;s>o;o++)if(n=i[o],a[n][e]){t=n;break}return t},all:b.Events.Natives.split(/\s+/g),fn:{trigger:function(n,r){var i,a,o,s=this.data.events[n];if(s){if(i=b.events.getInterface(n))return a=t.createEvent(i),a.initEvent(n,!0,!0,e,1),this.media.dispatchEvent(a),this;for(o=s.slice();o.length;)o.shift().call(this,r)}return this},listen:function(e,t){var n,r,i=this,a=!0,o=b.events.hooks[e];if("function"!=typeof t)throw new Error("Popcorn.js Error: Listener is not a function");return this.data.events[e]||(this.data.events[e]=[],a=!1),o&&(o.add&&o.add.call(this,{},t),o.bind&&(e=o.bind),o.handler&&(r=t,t=function(e){o.handler.call(i,e,r)}),a=!0,this.data.events[e]||(this.data.events[e]=[],a=!1)),this.data.events[e].push(t),!a&&b.events.all.indexOf(e)>-1&&this.media.addEventListener(e,function(t){if(i.data.events[e])for(n=i.data.events[e].slice();n.length;)n.shift().call(i,t)},!1),this},unlisten:function(e,t){var n,r=this.data.events[e];if(r){if("string"==typeof t){for(var i=0;i<r.length;i++)r[i].name===t&&r.splice(i--,1);return this}if("function"==typeof t){for(;-1!==n;)n=r.indexOf(t),-1!==n&&r.splice(n,1);return this}return this.data.events[e]=null,this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(e,t){var n=!1;this.media.readyState&&(setTimeout(function(){t.call(this,e)}.bind(this),0),n=!0),this.data.hooks.canplayall={fired:n}},handler:function(e,t){this.data.hooks.canplayall.fired||(t.call(this,e),this.data.hooks.canplayall.fired=!0)}}}},b.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(e){b.p[e[0]]=b.p[e[1]]=b.events.fn[e[0]]}),n.start=function(e,t){t.end>e.media.currentTime&&t.start<=e.media.currentTime&&!t._running&&(t._running=!0,e.data.running[t._natives.type].push(t),e.data.disabled[t._natives.type]||(t._natives.start.call(e,null,t),e.emit("trackstart",b.extend({},t,{plugin:t._natives.type,type:"trackstart",track:t}))))},n.end=function(e,t){var n;(t.end<=e.media.currentTime||t.start>e.media.currentTime)&&t._running&&(n=e.data.running[t._natives.type],t._running=!1,n.splice(n.indexOf(t),1),e.data.disabled[t._natives.type]||(t._natives.end.call(e,null,t),e.emit("trackend",b.extend({},t,{plugin:t._natives.type,type:"trackend",track:t}))))},r.prototype.where=function(e){return(this.parent.getTrackEvents()||[]).filter(function(t){var n,r;if(!e)return!0;for(n in e)if(r=e[n],i(t,n,r)||i(t._natives,n,r))return!0;return!1})},r.prototype.add=function(e){var t,n,r=this.byStart,i=this.byEnd;for(e&&e._id&&this.parent.data.history.push(e._id),e.start=b.util.toSeconds(e.start,this.parent.options.framerate),e.end=b.util.toSeconds(e.end,this.parent.options.framerate),t=r.length-1;t>=0;t--)if(e.start>=r[t].start){r.splice(t+1,0,e);break}for(n=i.length-1;n>=0;n--)if(e.end>i[n].end){i.splice(n+1,0,e);break}t<=this.parent.data.trackEvents.startIndex&&e.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++,n<=this.parent.data.trackEvents.endIndex&&e.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++,this.count++},r.prototype.remove=function(e,t){if(e instanceof n&&(e=e.id),"object"==typeof e)return this.where(e).forEach(function(e){this.removeTrackEvent(e._id)},this.parent),this;var r,i,a,o,s,u=this.byStart.length,c=0,d=0,l=[],p=[],f=[],h=[];for(t=t||{};--u>-1;)r=this.byStart[c],i=this.byEnd[c],r._id||(l.push(r),p.push(i)),r._id&&(r._id!==e&&l.push(r),i._id!==e&&p.push(i),r._id===e&&(d=c,s=r)),c++;if(u=this.animating.length,c=0,u)for(;--u>-1;)a=this.animating[c],a._id||f.push(a),a._id&&a._id!==e&&f.push(a),c++;d<=this.startIndex&&this.startIndex--,d<=this.endIndex&&this.endIndex--,this.byStart=l,this.byEnd=p,this.animating=f,this.count--,o=this.parent.data.history.length;for(var v=0;o>v;v++)this.parent.data.history[v]!==e&&h.push(this.parent.data.history[v]);this.parent.data.history=h},b.addTrackEvent=function(e,t){var r;t instanceof n||(t=new n(t),t&&t._natives&&t._natives.type&&e.options.defaults&&e.options.defaults[t._natives.type]&&(r=b.extend({},t),b.extend(t,e.options.defaults[t._natives.type],r)),t._natives&&(t._id=t.id||t._id||b.guid(t._natives.type),t._natives._setup&&(t._natives._setup.call(e,t),e.emit("tracksetup",b.extend({},t,{plugin:t._natives.type,type:"tracksetup",track:t})))),e.data.trackEvents.add(t),n.start(e,t),this.timeUpdate(e,null,!0),t._id&&b.addTrackEvent.ref(e,t),e.emit("trackadded",b.extend({},t,t._natives?{plugin:t._natives.type}:{},{type:"trackadded",track:t})))},b.addTrackEvent.ref=function(e,t){return e.data.trackRefs[t._id]=t,e},b.removeTrackEvent=function(e,t){var n=e.getTrackEvent(t);n&&(n._natives._teardown&&n._natives._teardown.call(e,n),e.data.trackEvents.remove(t),b.removeTrackEvent.ref(e,t),n._natives&&e.emit("trackremoved",b.extend({},n,{plugin:n._natives.type,type:"trackremoved",track:n})))},b.removeTrackEvent.ref=function(e,t){return delete e.data.trackRefs[t],e},b.getTrackEvents=function(e){for(var t,n=[],r=e.data.trackEvents.byStart,i=r.length,a=0;i>a;a++)t=r[a],t._id&&n.push(t);return n},b.getTrackEvents.ref=function(e){return e.data.trackRefs},b.getTrackEvent=function(e,t){return e.data.trackRefs[t]},b.getTrackEvent.ref=function(e,t){return e.data.trackRefs[t]},b.getLastTrackEventId=function(e){return e.data.history[e.data.history.length-1]},b.timeUpdate=function(e,t){var n,r,i,a,o,s=e.media.currentTime,u=e.data.trackEvents.previousUpdateTime,c=e.data.trackEvents,d=c.endIndex,l=c.startIndex,p=c.byStart.length,f=c.byEnd.length,h=b.registryByName,v="trackstart",y="trackend";if(s>=u){for(;c.byEnd[d]&&c.byEnd[d].end<=s;){if(n=c.byEnd[d],i=n._natives,a=i&&i.type,i&&!h[a]&&!e[a])return void b.removeTrackEvent(e,n._id);n._running===!0&&(n._running=!1,o=e.data.running[a],o.splice(o.indexOf(n),1),e.data.disabled[a]||(i.end.call(e,t,n),e.emit(y,b.extend({},n,{plugin:a,type:y,track:n})))),d++}for(;c.byStart[l]&&c.byStart[l].start<=s;){if(r=c.byStart[l],i=r._natives,a=i&&i.type,i&&!h[a]&&!e[a])return void b.removeTrackEvent(e,r._id);r.end>s&&r._running===!1&&(r._running=!0,e.data.running[a].push(r),e.data.disabled[a]||(i.start.call(e,t,r),e.emit(v,b.extend({},r,{plugin:a,type:v,track:r})))),l++}}else if(u>s){for(;c.byStart[l]&&c.byStart[l].start>s;){if(r=c.byStart[l],i=r._natives,a=i&&i.type,i&&!h[a]&&!e[a])return void b.removeTrackEvent(e,r._id);r._running===!0&&(r._running=!1,o=e.data.running[a],o.splice(o.indexOf(r),1),e.data.disabled[a]||(i.end.call(e,t,r),e.emit(y,b.extend({},r,{plugin:a,type:y,track:r})))),l--}for(;c.byEnd[d]&&c.byEnd[d].end>s;){if(n=c.byEnd[d],i=n._natives,a=i&&i.type,i&&!h[a]&&!e[a])return void b.removeTrackEvent(e,n._id);n.start<=s&&n._running===!1&&(n._running=!0,e.data.running[a].push(n),e.data.disabled[a]||(i.start.call(e,t,n),e.emit(v,b.extend({},n,{plugin:a,type:v,track:n})))),d--}}c.endIndex=d,c.startIndex=l,c.previousUpdateTime=s,c.byStart.length<p&&c.startIndex--,c.byEnd.length<f&&c.endIndex--},b.extend(b.p,{getTrackEvents:function(){return b.getTrackEvents.call(null,this)},getTrackEvent:function(e){return b.getTrackEvent.call(null,this,e)},getLastTrackEventId:function(){return b.getLastTrackEventId.call(null,this)},removeTrackEvent:function(e){return b.removeTrackEvent.call(null,this,e),this},removePlugin:function(e){return b.removePlugin.call(null,this,e),this},timeUpdate:function(e){return b.timeUpdate.call(null,this,e),this},destroy:function(){return b.destroy.call(null,this),this}}),b.manifest={},b.registry=[],b.registryByName={},b.plugin=function(e,t,r){if(b.protect.natives.indexOf(e.toLowerCase())>=0)return void b.error("'"+e+"' is a protected function name");var i="function"==typeof t,s=["start","end","type","manifest"],u=["_setup","_teardown","start","end","frame"],c={},p=function(e,t){return e=e||b.nop,t=t||b.nop,function(){e.apply(this,arguments),t.apply(this,arguments)}};b.manifest[e]=r=r||t.manifest||{},u.forEach(function(n){t[n]=o(t[n]||b.nop,e)});var f=function(t,i){if(!i)return this;if(i.ranges&&b.isArray(i.ranges))return b.forEach(i.ranges,function(t){var n=b.extend({},i,t);delete n.ranges,this[e](n)},this),this;var a,o=i._natives={},c="";return b.extend(o,t),i._natives.type=i._natives.plugin=e,i._running=!1,o.start=o.start||o["in"],o.end=o.end||o.out,i.once&&(o.end=p(o.end,function(){this.removeTrackEvent(i._id)})),o._teardown=p(function(){var e=d.call(arguments),t=this.data.running[o.type];e.unshift(null),e[1]._running&&t.splice(t.indexOf(i),1)&&o.end.apply(this,e),e[1]._running=!1,this.emit("trackend",b.extend({},i,{plugin:o.type,type:"trackend",track:b.getTrackEvent(this,i.id||i._id)}))},o._teardown),o._teardown=p(o._teardown,function(){this.emit("trackteardown",b.extend({},i,{plugin:e,type:"trackteardown",track:b.getTrackEvent(this,i.id||i._id)}))}),i.compose=i.compose||[],"string"==typeof i.compose&&(i.compose=i.compose.split(" ")),i.effect=i.effect||[],"string"==typeof i.effect&&(i.effect=i.effect.split(" ")),i.compose=i.compose.concat(i.effect),i.compose.forEach(function(e){c=b.compositions[e]||{},u.forEach(function(e){o[e]=p(o[e],c[e])})}),i._natives.manifest=r,"start"in i||(i.start=i["in"]||0),i.end||0===i.end||(i.end=i.out||Number.MAX_VALUE),l.call(i,"toString")||(i.toString=function(){var t=["start: "+i.start,"end: "+i.end,"id: "+(i.id||i._id)];return null!=i.target&&t.push("target: "+i.target),e+" ( "+t.join(", ")+" )"}),i.target||(a="options"in r&&r.options,i.target=a&&"target"in a&&a.target),!i._id&&i._natives&&(i._id=b.guid(i._natives.type)),i instanceof n?(i._natives&&(i._id=i.id||i._id||b.guid(i._natives.type),i._natives._setup&&(i._natives._setup.call(this,i),this.emit("tracksetup",b.extend({},i,{plugin:i._natives.type,type:"tracksetup",track:i})))),this.data.trackEvents.add(i),n.start(this,i),this.timeUpdate(this,null,!0),i._id&&b.addTrackEvent.ref(this,i)):b.addTrackEvent(this,i),b.forEach(t,function(e,t){-1===s.indexOf(t)&&this.on(t,e)},this),this};b.p[e]=c[e]=function(r,o){var s,u,c,d,p;arguments.length;if(r&&!o)o=r,r=null;else{if(s=this.getTrackEvent(r))return p=o,d=a(s,p),s._natives._update?(this.data.trackEvents.remove(s),l.call(o,"start")&&(s.start=o.start),l.call(o,"end")&&(s.end=o.end),n.end(this,s),i&&t.call(this,s),s._natives._update.call(this,s,o),this.data.trackEvents.add(s),n.start(this,s),"cue"!==s._natives.type&&this.emit("trackchange",{id:s.id,type:"trackchange",previousValue:d,currentValue:p,track:s}),this):(b.extend(s,o),this.data.trackEvents.remove(r),s._natives._teardown&&s._natives._teardown.call(this,s),b.removeTrackEvent.ref(this,r),i?f.call(this,t.call(this,s),s):(s._id=s.id||s._id||b.guid(s._natives.type),s._natives&&s._natives._setup&&(s._natives._setup.call(this,s),this.emit("tracksetup",b.extend({},s,{plugin:s._natives.type,type:"tracksetup",track:s}))),this.data.trackEvents.add(s),n.start(this,s),this.timeUpdate(this,null,!0),b.addTrackEvent.ref(this,s)),this.emit("trackchange",{id:s.id,type:"trackchange",previousValue:d,currentValue:s,track:s}),this);o.id=r}return this.data.running[e]=this.data.running[e]||[],u=this.options.defaults&&this.options.defaults[e]||{},c=b.extend({},u,o),f.call(this,i?t.call(this,c):t,c),this},r&&b.extend(t,{manifest:r});var h={fn:c[e],definition:t,base:t,parents:[],name:e};return b.registry.push(b.extend(c,h,{type:e})),b.registryByName[e]=h,c},b.plugin.errors=[],b.plugin.debug="@VERSION"===b.version,b.removePlugin=function(e,t){if(!t){if(t=e,e=b.p,b.protect.natives.indexOf(t.toLowerCase())>=0)return void b.error("'"+t+"' is a protected function name");var n,r=b.registry.length;for(n=0;r>n;n++)if(b.registry[n].name===t)return b.registry.splice(n,1),delete b.registryByName[t],delete b.manifest[t],void delete e[t]}var i,a,o=e.data.trackEvents.byStart,s=e.data.trackEvents.byEnd,u=e.data.trackEvents.animating;for(i=0,a=o.length;a>i;i++)o[i]&&o[i]._natives&&o[i]._natives.type===t&&(o[i]._natives._teardown&&o[i]._natives._teardown.call(e,o[i]),o.splice(i,1),i--,a--,e.data.trackEvents.startIndex<=i&&(e.data.trackEvents.startIndex--,e.data.trackEvents.endIndex--)),s[i]&&s[i]._natives&&s[i]._natives.type===t&&s.splice(i,1);for(i=0,a=u.length;a>i;i++)u[i]&&u[i]._natives&&u[i]._natives.type===t&&(u.splice(i,1),i--,a--)},b.compositions={},b.compose=function(e,t,n){b.manifest[e]=n=n||t.manifest||{},b.compositions[e]=t},b.plugin.effect=b.effect=b.compose;var T=/^(?:\.|#|\[)/;b.dom={debug:!1,find:function(e,n){var r=null;if(n=n||t,e){if(!T.test(e)&&(r=t.getElementById(e),null!==r))return r;try{r=n.querySelector(e)}catch(i){if(b.dom.debug)throw new Error(i)}}return r}};var w=/\?/,k={ajax:null,url:"",data:"",dataType:"",success:b.nop,type:"GET",async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};b.xhr=function(e){var t;return e.dataType=e.dataType&&e.dataType.toLowerCase()||null,!e.dataType||"jsonp"!==e.dataType&&"script"!==e.dataType?(t=b.extend({},k,e),t.ajax=new XMLHttpRequest,t.ajax?("GET"===t.type&&t.data&&(t.url+=(w.test(t.url)?"&":"?")+t.data,t.data=null),t.ajax.open(t.type,t.url,t.async),"POST"===t.type&&t.ajax.setRequestHeader("Content-Type",t.contentType),t.ajax.send(t.data||null),b.xhr.httpData(t)):void 0):void b.xhr.getJSONP(e.url,e.success,"script"===e.dataType)},b.xhr.httpData=function(e){var t,n,r=null,i=null;return e.ajax.onreadystatechange=function(){if(4===e.ajax.readyState){try{r=JSON.parse(e.ajax.responseText)}catch(a){}if(t={xml:e.ajax.responseXML,text:e.ajax.responseText,json:r},!t.xml||!t.xml.documentElement){t.xml=null;try{n=new DOMParser,i=n.parseFromString(e.ajax.responseText,"text/xml"),i.getElementsByTagName("parsererror").length||(t.xml=i)}catch(a){}}e.dataType&&(t=t[e.dataType]),e.success.call(e.ajax,t)}},t},b.xhr.getJSONP=function(e,n,r){var i,a,o,s=t.head||t.getElementsByTagName("head")[0]||t.documentElement,u=t.createElement("script"),c=!1,d=[],l=/(=)\?(?=&|$)|\?\?/;r||(o=e.match(/(callback=[^&]*)/),null!==o&&o.length?(i=o[1].split("=")[1],"?"===i&&(i="jsonp"),a=b.guid(i),e=e.replace(/(callback=[^&]*)/,"callback="+a)):(a=b.guid("jsonp"),l.test(e)&&(e=e.replace(l,"$1"+a)),d=e.split(/\?(.+)?/),e=d[0]+"?",d[1]&&(e+=d[1]+"&"),e+="callback="+a),window[a]=function(e){n&&n(e),c=!0}),u.addEventListener("load",function(){r&&n&&n(),c&&delete window[a],s.removeChild(u)},!1),u.addEventListener("error",function(e){n&&n({error:e}),r||delete window[a],s.removeChild(u)},!1),u.src=e,s.insertBefore(u,s.firstChild)},b.getJSONP=b.xhr.getJSONP,b.getScript=b.xhr.getScript=function(e,t){return b.xhr.getJSONP(e,t,!0)},b.util={toSeconds:function(e,t){var n,r,i,a,o,s,u=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,c="Invalid time format";return"number"==typeof e?e:("string"!=typeof e||u.test(e)||b.error(c),n=e.split(":"),r=n.length-1,i=n[r],i.indexOf(";")>-1&&(o=i.split(";"),s=0,t&&"number"==typeof t&&(s=parseFloat(o[1],10)/t),n[r]=parseInt(o[0],10)+s),a=n[0],{1:parseFloat(a,10),2:60*parseInt(a,10)+parseFloat(n[1],10),3:3600*parseInt(a,10)+60*parseInt(n[1],10)+parseFloat(n[2],10)}[n.length||1])}},b.p.cue=b.p.exec,b.protect={natives:E(b.p).map(function(e){return e.toLowerCase()})},b.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(e,t){var n=b.p[t];b.p[t]=function(){return"undefined"!=typeof console&&console.warn&&(console.warn("Deprecated method '"+t+"', "+(null==e?"do not use.":"use '"+e+"' instead.")),b.p[t]=n),b.p[e].apply(this,[].slice.call(arguments))}}),e.Popcorn=b}else{e.Popcorn={isSupported:!1};for(var x="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);x.length;)e.Popcorn[x.shift()]=function(){}}}(window,window.document),function(e){var t=function(t,n){var r,i=0,a=0;e.forEach(n.classes,function(e,t){for(r=[],"parent"===e?r[0]=document.querySelectorAll("#"+n.target)[0].parentNode:r=document.querySelectorAll("#"+n.target+" "+e),i=0,a=r.length;a>i;i++)r[i].classList.toggle(t)})};e.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(e){e.classes={},e.applyclass=e.applyclass||"";for(var t=e.applyclass.replace(/\s/g,"").split(","),n=[],r=0,i=t.length;i>r;r++)n=t[r].split(":"),n[0]&&(e.classes[n[0]]=n[1]||"")},start:t,end:t})}(Popcorn),function(e,t){function n(e){var t="string"==typeof e?e:[e.language,e.region].join("-"),n=t.split("-");return{iso6391:t,language:n[0]||"",region:n[1]||""}}var r=e.navigator,i=n(r.userLanguage||r.language);t.locale={get:function(){return i},set:function(e){return i=n(e),t.locale.broadcast(),i},broadcast:function(e){var n,r=t.instances,i=r.length,a=0;for(e=e||"locale:changed";i>a;a++)n=r[a],e in n.data.events&&n.trigger(e)}}}(this,this.Popcorn),function(e){var t=Array.prototype,n=Object.prototype,r=(t.forEach,t.slice,n.hasOwnProperty);n.toString;e.parsers={},e.parser=function(t,n,i){if(e.protect.natives.indexOf(t.toLowerCase())>=0)return void e.error("'"+t+"' is a protected function name");if("function"!=typeof n||i||(i=n,n=""),"function"==typeof i&&"string"==typeof n){var a,o=(e.events.all,{});return a=function(t,a,o){if(!t)return this;"function"==typeof a||o||(o=a,a=null);var s=this;return e.xhr({url:t,dataType:n,success:function(e){var t,n,u,c=i(e,o),d=0;if(t=c.data||[],n=t.length,u=null,n){for(;n>d;d++){u=t[d];for(var l in u)r.call(u,l)&&s[l]&&s[l](u[l])}a&&a()}}}),this},o[t]=a,e.extend(e.p,o),o}}}(Popcorn),function(e){var t=function(t,n){return t=t||e.nop,n=n||e.nop,function(){t.apply(this,arguments),n.apply(this,arguments)}};e.player=function(n,r){if(!e[n]){r=r||{};var i=function(n,i,a){a=a||{};var o,s,u=new Date/1e3,c=u,d=0,l=0,p=1,f=!1,h={},v="string"==typeof n?e.dom.find(n):n,y={};Object.prototype.__defineGetter__||(y=v||document.createElement("div"));for(var m in v)m in y||("object"==typeof v[m]?y[m]=v[m]:"function"==typeof v[m]?y[m]=function(e){return"length"in v[e]&&!v[e].call?v[e]:function(){return v[e].apply(v,arguments)}}(m):e.player.defineProperty(y,m,{get:function(e){return function(){return v[e]}}(m),set:e.nop,configurable:!0}));var g=function(){u=new Date/1e3,
y.paused||(y.currentTime=y.currentTime+(u-c),y.dispatchEvent("timeupdate"),o=setTimeout(g,10)),c=u};return y.play=function(){this.paused=!1,y.readyState>=4&&(c=new Date/1e3,y.dispatchEvent("play"),g())},y.pause=function(){this.paused=!0,y.dispatchEvent("pause")},e.player.defineProperty(y,"currentTime",{get:function(){return d},set:function(e){return d=+e,y.dispatchEvent("timeupdate"),d},configurable:!0}),e.player.defineProperty(y,"volume",{get:function(){return p},set:function(e){return p=+e,y.dispatchEvent("volumechange"),p},configurable:!0}),e.player.defineProperty(y,"muted",{get:function(){return f},set:function(e){return f=+e,y.dispatchEvent("volumechange"),f},configurable:!0}),e.player.defineProperty(y,"readyState",{get:function(){return l},set:function(e){return l=e},configurable:!0}),y.addEventListener=function(e,t){return h[e]||(h[e]=[]),h[e].push(t),t},y.removeEventListener=function(e,t){var n,r=h[e];if(r){for(n=h[e].length-1;n>=0;n--)t===r[n]&&r.splice(n,1);return t}},y.dispatchEvent=function(t){var n,r,i=this,a=t.type;if(a||(a=t,r=e.events.getInterface(a),r&&(n=document.createEvent(r),n.initEvent(a,!0,!0,window,1))),h[a])for(var o=h[a].length-1;o>=0;o--)h[a][o].call(i,n,i)},y.src=i||"",y.duration=0,y.paused=!0,y.ended=0,a&&a.events&&e.forEach(a.events,function(e,t){y.addEventListener(t,e,!1)}),r._canPlayType(v.nodeName,i)!==!1?r._setup?r._setup.call(y,a):(y.readyState=4,y.dispatchEvent("loadedmetadata"),y.dispatchEvent("loadeddata"),y.dispatchEvent("canplaythrough")):setTimeout(function(){y.dispatchEvent("error")},0),s=new e.p.init(y,a),r._teardown&&(s.destroy=t(s.destroy,function(){r._teardown.call(y,a)})),s};i.canPlayType=r._canPlayType=r._canPlayType||e.nop,e[n]=e.player.registry[n]=i}},e.player.registry={},e.player.defineProperty=Object.defineProperty||function(t,n,r){t.__defineGetter__(n,r.get||e.nop),t.__defineSetter__(n,r.set||e.nop)},e.player.playerQueue=function(){var e=[],t=!1;return{next:function(){t=!1,e.shift(),e[0]&&e[0]()},add:function(n){e.push(function(){t=!0,n&&n()}),!t&&e[0]()}}},e.smart=function(t,n,r){var i,a,o,s,u,c,d,l="string"==typeof t?e.dom.find(t):t,p="HTMLYouTubeVideoElement HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(!l)return void e.error("Specified target `"+t+"` was not found.");for(n="string"==typeof n?[n]:n,i=0,d=n.length;d>i;i++){for(a=n[i],o=0;o<p.length;o++)if(u=e[p[o]],u&&"probably"===u._canPlaySrc(a))return s=u(l),c=e(s,r),setTimeout(function(){s.src=a},0),c;for(var f in e.player.registry)if(e.player.registry.hasOwnProperty(f)&&e.player.registry[f].canPlayType(l.nodeName,a))return e[f](l,a,r)}var h,v,y=e.guid("popcorn-video-"),m=document.createElement("div");if(m.style.width="100%",m.style.height="100%",1===n.length)return v=document.createElement("video"),v.id=y,l.appendChild(v),setTimeout(function(){var e=document.createElement("div");e.innerHTML=n[0],v.src=e.firstChild.nodeValue},0),e("#"+y,r);for(l.appendChild(m),h='<video id="'+y+'" preload=auto autobuffer>',i=0,d=n.length;d>i;i++)h+='<source src="'+n[i]+'">';return h+="</video>",m.innerHTML=h,r&&r.events&&r.events.error&&l.addEventListener("error",r.events.error,!1),e("#"+y,r)}}(Popcorn),function(e){function t(e){function t(){var t=e.getBoundingClientRect(),n=a.getBoundingClientRect();n.left!==t.left&&(a.style.left=t.left+"px"),n.top!==t.top&&(a.style.top=t.top+"px")}var i=-1,a=document.createElement("div"),o=getComputedStyle(e).zIndex;return a.setAttribute("data-popcorn-helper-container",!0),a.style.position="absolute",isNaN(o)?a.style.zIndex=n:a.style.zIndex=o+1,document.body.appendChild(a),{element:a,start:function(){i=setInterval(t,r)},stop:function(){clearInterval(i),i=-1},destroy:function(){document.body.removeChild(a),-1!==i&&clearInterval(i)}}}var n=2e3,r=10;e.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:!0},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:!0}}},_setup:function(n){var r=document.createElement("img"),i=document.getElementById(n.target);n.anchor=document.createElement("a"),n.anchor.style.position="relative",n.anchor.style.textDecoration="none",n.anchor.style.display="none",i&&(["VIDEO","AUDIO"].indexOf(i.nodeName)>-1?(n.trackedContainer=t(i),n.trackedContainer.element.appendChild(n.anchor)):i.appendChild(n.anchor)),r.addEventListener("load",function(){r.style.borderStyle="none",n.anchor.href=n.href||n.src||"#",n.anchor.target="_blank";var t,a;r.style.height=i.style.height,r.style.width=i.style.width,n.anchor.appendChild(r),n.text&&(t=r.height/12+"px",a=document.createElement("div"),e.extend(a.style,{color:"black",fontSize:t,fontWeight:"bold",position:"relative",textAlign:"center",width:r.style.width||r.width+"px",zIndex:"10"}),a.innerHTML=n.text||"",a.style.top=(r.style.height.replace("px","")||r.height)/2-a.offsetHeight/2+"px",n.anchor.insertBefore(a,r))},!1),r.src=n.src,n.toString=function(){var e=n.src||n._natives.manifest.options.src["default"],t=e.replace(/.*\//g,"");return t.length?t:e}},start:function(e,t){t.anchor.style.display="inline",t.trackedContainer&&t.trackedContainer.start()},end:function(e,t){t.anchor.style.display="none",t.trackedContainer&&t.trackedContainer.stop()},_teardown:function(e){e.trackedContainer?e.trackedContainer.destroy():e.anchor.parentNode&&e.anchor.parentNode.removeChild(e.anchor)}})}(Popcorn),function(e,t){var n,r="http://popcornjs.org/code/modules/player/popcorn.player.js",i=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,a={},o={vimeo:!1,youtube:!1,soundcloud:!1,module:!1};Object.defineProperty(a,n,{get:function(){return o[n]},set:function(e){o[n]=e}}),e.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:!0},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:!0},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:!0},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:!0}}},_setup:function(t){function n(){function n(){"HTML5"===s||window.Popcorn[s]?(t.id=t._container.id,t._container.style.width=t.width+"px",t._container.style.height=t.height+"px",t.popcorn=e.smart("#"+t.id,t.source),"HTML5"===s&&t.popcorn.controls(!0),t._container.style.width="0px",t._container.style.height="0px",t._container.style.visibility="hidden",t._container.style.overflow="hidden"):setTimeout(function(){n()},300)}"HTML5"===s||window.Popcorn[s]||a[s]?n():(a[s]=!0,e.getScript("http://popcornjs.org/code/players/"+s+"/popcorn."+s+".js",function(){n()}))}function o(){window.Popcorn.player?n():setTimeout(function(){o()},300)}var s,u,c,d,l=document.getElementById(t.target)||{};d=i.exec(t.source),d?(s=d[1],"youtu"===s&&(s="youtube")):s="HTML5",t._type=s,t._container=document.createElement("div"),u=t._container,u.id="mediaSpawnerdiv-"+e.guid(),t.width=t.width||400,t.height=t.height||200,t.caption&&(c=document.createElement("div"),c.innerHTML=t.caption,c.style.display="none",t._capCont=c,u.appendChild(c)),l&&l.appendChild(u),window.Popcorn.player||a.module?o():(a.module=!0,e.getScript(r,o)),t.toString=function(){return t.source||t._natives.manifest.options.source["default"]}},start:function(e,t){t._capCont&&(t._capCont.style.display=""),t._container.style.width=t.width+"px",t._container.style.height=t.height+"px",t._container.style.visibility="visible",t._container.style.overflow="visible",t.autoplay&&t.popcorn.play()},end:function(e,t){t._capCont&&(t._capCont.style.display="none"),t._container.style.width="0px",t._container.style.height="0px",t._container.style.visibility="hidden",t._container.style.overflow="hidden",t.popcorn.pause()},_teardown:function(e){e.popcorn&&e.popcorn.destory&&e.popcorn.destroy(),document.getElementById(e.target)&&document.getElementById(e.target).removeChild(e._container)}})}(Popcorn,this),document.addEventListener("click",function(e){var t=e.target;("A"===t.nodeName||t.parentNode&&"A"===t.parentNode.nodeName)&&Popcorn.instances.forEach(function(e){e.options.pauseOnLinkClicked&&e.pause()})},!1),function(e){var t=1;e.plugin("timeline",function(e){var n,r=document.getElementById(e.target),i=document.createElement("div"),a=!0;return r&&!r.firstChild?(r.appendChild(n=document.createElement("div")),n.style.width="inherit",n.style.height="inherit",n.style.overflow="auto"):n=r.firstChild,i.style.display="none",i.id="timelineDiv"+t,e.direction=e.direction||"up","down"===e.direction.toLowerCase()&&(a=!1),r&&n&&(a?n.insertBefore(i,n.firstChild):n.appendChild(i)),t++,i.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+e.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+e.text+"</span><br />"+e.innerHTML,{start:function(e,t){i.style.display="block","down"===t.direction&&(n.scrollTop=n.scrollHeight)},end:function(e,t){i.style.display="none"},_teardown:function(e){n&&i&&n.removeChild(i)&&!n.firstChild&&r.removeChild(n)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:!0},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:!0}}})}(Popcorn),function(e){e.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:!0},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(e){var t=document.getElementById(e.target);e.src=e.src.replace(/^(https?:)?(\/\/)?/,"//"),e._iframe=document.createElement("iframe"),e._iframe.setAttribute("width","100%"),e._iframe.setAttribute("height","100%"),e._iframe.id=e.id,e._iframe.src=e.src,e._iframe.style.display="none",t&&t.appendChild(e._iframe)},start:function(e,t){t._iframe.src=t.src,t._iframe.style.display="inline"},end:function(e,t){t._iframe.style.display="none"},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(e._iframe)}})}(Popcorn),function(e,t){function n(e){for(var t=n.options,r=t.parser[t.strictMode?"strict":"loose"].exec(e),i={},a=14;a--;)i[t.key[a]]=r[a]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(e,n,r){n&&(i[t.q.name][n]=r)}),i}function r(){var r,a={};return Object.prototype.__defineGetter__||(a=t.createElement("div")),a._util={type:"HTML5",TIMEUPDATE_MS:250,MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(e){return"string"==typeof e||e===!0},parseUri:n},a.addEventListener=function(e,n,r){t.addEventListener(this._eventNamespace+e,n,r)},a.removeEventListener=function(e,n,r){t.removeEventListener(this._eventNamespace+e,n,r)},a.dispatchEvent=function(e){var n=t.createEvent("CustomEvent"),r={type:e,target:this.parentNode,data:null};n.initCustomEvent(this._eventNamespace+e,!1,!1,r),t.dispatchEvent(n)},a.load=e.nop,a.canPlayType=function(e){return""},a.getBoundingClientRect=function(){return r.getBoundingClientRect()},a.NETWORK_EMPTY=0,a.NETWORK_IDLE=1,a.NETWORK_LOADING=2,a.NETWORK_NO_SOURCE=3,a.HAVE_NOTHING=0,a.HAVE_METADATA=1,a.HAVE_CURRENT_DATA=2,a.HAVE_FUTURE_DATA=3,a.HAVE_ENOUGH_DATA=4,Object.defineProperties(a,{currentSrc:{get:function(){return void 0!==this.src?this.src:""},configurable:!0},parentNode:{get:function(){return r},set:function(e){r=e},configurable:!0},preload:{get:function(){return"auto"},set:e.nop,configurable:!0},controls:{get:function(){return!0},set:e.nop,configurable:!0},poster:{get:function(){return""},set:e.nop,configurable:!0},crossorigin:{get:function(){return""},configurable:!0},played:{get:function(){return i},configurable:!0},seekable:{get:function(){return i},configurable:!0},buffered:{get:function(){return i},configurable:!0},defaultMuted:{get:function(){return!1},configurable:!0},defaultPlaybackRate:{get:function(){return 1},configurable:!0},style:{get:function(){return this.parentNode.style},configurable:!0},id:{get:function(){return this.parentNode.id},configurable:!0}}),a}n.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var i={length:0,start:e.nop,end:e.nop};window.MediaError=window.MediaError||function(){function e(e,t){this.code=e||null,this.message=t||""}return e.MEDIA_ERR_NONE_ACTIVE=0,e.MEDIA_ERR_ABORTED=1,e.MEDIA_ERR_NETWORK=2,e.MEDIA_ERR_DECODE=3,e.MEDIA_ERR_NONE_SUPPORTED=4,e}(),e._MediaElementProto=r}(Popcorn,window.document),function(e,t){function n(e){return"maybe"}function r(e,r){var i="string"==typeof e?t.querySelector(e):e,a=t.createElement(r);return i.appendChild(a),a._canPlaySrc=n,a}e.HTMLVideoElement=function(e){return r(e,"video")},e.HTMLVideoElement._canPlaySrc=n,e.HTMLAudioElement=function(e){return r(e,"audio")},e.HTMLAudioElement._canPlaySrc=n}(Popcorn,window.document),function(e,t){function n(e){for(var t=n.options,r=t.parser[t.strictMode?"strict":"loose"].exec(e),i={},a=14;a--;)i[t.key[a]]=r[a]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(e,n,r){n&&(i[t.q.name][n]=r)}),i}function r(){var r,a={};return Object.prototype.__defineGetter__||(a=t.createElement("div")),a._util={type:"HTML5",TIMEUPDATE_MS:250,MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(e){return"string"==typeof e||e===!0},parseUri:n},a.addEventListener=function(e,n,r){t.addEventListener(this._eventNamespace+e,n,r)},a.removeEventListener=function(e,n,r){t.removeEventListener(this._eventNamespace+e,n,r)},a.dispatchEvent=function(e){var n=t.createEvent("CustomEvent"),r={type:e,target:this.parentNode,data:null};n.initCustomEvent(this._eventNamespace+e,!1,!1,r),t.dispatchEvent(n)},a.load=e.nop,a.canPlayType=function(e){return""},a.getBoundingClientRect=function(){return r.getBoundingClientRect()},a.NETWORK_EMPTY=0,a.NETWORK_IDLE=1,a.NETWORK_LOADING=2,a.NETWORK_NO_SOURCE=3,a.HAVE_NOTHING=0,a.HAVE_METADATA=1,a.HAVE_CURRENT_DATA=2,a.HAVE_FUTURE_DATA=3,a.HAVE_ENOUGH_DATA=4,Object.defineProperties(a,{currentSrc:{get:function(){return void 0!==this.src?this.src:""},configurable:!0},parentNode:{get:function(){return r},set:function(e){r=e},configurable:!0},preload:{get:function(){return"auto"},set:e.nop,configurable:!0},controls:{get:function(){return!0},set:e.nop,configurable:!0},poster:{get:function(){return""},set:e.nop,configurable:!0},crossorigin:{get:function(){return""},configurable:!0},played:{get:function(){return i},configurable:!0},seekable:{get:function(){return i},configurable:!0},buffered:{get:function(){return i},configurable:!0},defaultMuted:{get:function(){return!1},configurable:!0},defaultPlaybackRate:{get:function(){return 1},configurable:!0},style:{get:function(){return this.parentNode.style},configurable:!0},id:{get:function(){return this.parentNode.id},configurable:!0}}),a}n.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var i={length:0,start:e.nop,end:e.nop};window.MediaError=window.MediaError||function(){function e(e,t){this.code=e||null,this.message=t||""}return e.MEDIA_ERR_NONE_ACTIVE=0,e.MEDIA_ERR_ABORTED=1,e.MEDIA_ERR_NETWORK=2,e.MEDIA_ERR_DECODE=3,e.MEDIA_ERR_NONE_SUPPORTED=4,e}(),e._MediaElementProto=r}(Popcorn,window.document),function(e,t){function n(t){this.startTime=0,this.currentTime=t.currentTime||0,this.duration=t.duration||NaN,this.playInterval=null,this.paused=!0,this.defaultPlaybackRate=1,this.playbackRate=1,this.ended=t.endedCallback||e.nop}function r(e){e.currentTime+=(Date.now()-e.startTime)/(1e3/e.playbackRate),e.startTime=Date.now(),e.currentTime>=e.duration&&(e.pause(e.duration),e.ended()),e.currentTime<0&&e.pause(0)}function i(r){function i(e){I.push(e)}function a(){var e;for(N=!0,O.networkState=x.NETWORK_IDLE,O.readyState=x.HAVE_METADATA,x.dispatchEvent("loadedmetadata"),x.dispatchEvent("loadeddata"),O.readyState=x.HAVE_FUTURE_DATA,x.dispatchEvent("canplay"),O.readyState=x.HAVE_ENOUGH_DATA,x.dispatchEvent("canplaythrough");I.length;)(e=I.shift())();O.autoplay&&x.play()}function u(){return w?w.duration:NaN}function c(){N&&w&&(w.pause(),w=null,S.removeChild(P),P=t.createElement("div"))}function d(e){if(!x._canPlaySrc(e))return O.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},void x.dispatchEvent("error");O.src=e,N&&c(),P.width=O.width,P.height=O.height,S.appendChild(P);var t=s.exec(e),r=+t[1],i=+t[2];w=new n({currentTime:r,duration:i,endedCallback:g}),x.dispatchEvent("loadstart"),x.dispatchEvent("progress"),x.dispatchEvent("durationchange"),a()}function l(){return N?w.currentTime:0}function p(e){if(e!==l()){if(!N)return void i(function(){p(e)});h(),w.seekTo(e),v()}}function f(){x.dispatchEvent("timeupdate")}function h(e){O.seeking=!0,x.dispatchEvent("seeking")}function v(){O.ended=!1,O.seeking=!1,x.dispatchEvent("timeupdate"),x.dispatchEvent("seeked"),x.dispatchEvent("canplay"),x.dispatchEvent("canplaythrough")}function y(){1===O.paused?(O.paused=!1,x.dispatchEvent("play"),x.dispatchEvent("playing")):(O.ended&&(p(0),O.ended=!1),O.paused&&(O.paused=!1,O.loop||x.dispatchEvent("play"),x.dispatchEvent("playing"))),k=setInterval(f,x._util.TIMEUPDATE_MS)}function m(){O.paused=!0,clearInterval(k),x.dispatchEvent("pause")}function g(){O.loop?(p(0),x.play()):(O.ended=!0,m(),x.dispatchEvent("timeupdate"),x.dispatchEvent("ended"))}function E(e){O.volume=e,x.dispatchEvent("volumechange")}function _(){return O.volume}function b(e){O.muted=e,x.dispatchEvent("volumechange")}function T(){return O.muted}var w,k,x=new e._MediaElementProto,S="string"==typeof r?t.querySelector(r):r,P=t.createElement("div"),N=!1,O={src:o,networkState:x.NETWORK_EMPTY,readyState:x.HAVE_NOTHING,autoplay:o,preload:o,controls:o,loop:!1,poster:o,volume:1,muted:!1,width:0|S.width?S.width:x._util.MIN_WIDTH,height:0|S.height?S.height:x._util.MIN_HEIGHT,seeking:!1,ended:!1,paused:1,error:null},I=[];return x._eventNamespace=e.guid("HTMLNullVideoElement::"),x.parentNode=S,x._util.type="NullVideo",x.play=function(){return N?(w.play(),void(O.paused&&y())):void i(function(){x.play()})},x.pause=function(){return N?(w.pause(),void(O.paused||m())):void i(function(){x.pause()})},Object.defineProperties(x,{src:{get:function(){return O.src},set:function(e){e&&e!==O.src&&d(e)}},autoplay:{get:function(){return O.autoplay},set:function(e){O.autoplay=x._util.isAttributeSet(e)}},loop:{get:function(){return O.loop},set:function(e){O.loop=x._util.isAttributeSet(e)}},width:{get:function(){return P.width},set:function(e){P.width=e,O.width=P.width}},height:{get:function(){return P.height},set:function(e){P.height=e,O.height=P.height}},currentTime:{get:function(){return l()},set:function(e){p(e)}},duration:{get:function(){return u()}},ended:{get:function(){return O.ended}},paused:{get:function(){return O.paused}},seeking:{get:function(){return O.seeking}},readyState:{get:function(){return O.readyState}},networkState:{get:function(){return O.networkState}},volume:{get:function(){return _()},set:function(e){if(0>e||e>1)throw"Volume value must be between 0.0 and 1.0";E(e)}},muted:{get:function(){return T()},set:function(e){b(x._util.isAttributeSet(e))}},playbackRate:{get:function(){return w.playbackRate},set:function(e){w.playbackRate=e,x.dispatchEvent("ratechange")}},error:{get:function(){return O.error}}}),x._canPlaySrc=e.HTMLNullVideoElement._canPlaySrc,x.canPlayType=e.HTMLNullVideoElement.canPlayType,x}var a=16,o="",s=/#t=(\d+\.?\d*)?,?(\d+\.?\d*)/;n.prototype={play:function(){var e=this;this.paused&&(this.paused=!1,this.startTime=Date.now(),this.playInterval=setInterval(function(){r(e)},a))},pause:function(){this.paused||(this.paused=!0,clearInterval(this.playInterval))},seekTo:function(e){e=0>e?0:e,e=e>this.duration?this.duration:e,this.currentTime=e}},e.HTMLNullVideoElement=function(e){return new i(e)},e.HTMLNullVideoElement._canPlaySrc=function(e){return s.test(e)?"probably":o},e.HTMLNullVideoElement.canPlayType=function(e){return"video/x-nullvideo"===e?"probably":o}}(Popcorn,document);